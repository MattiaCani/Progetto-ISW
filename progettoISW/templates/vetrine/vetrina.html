{% extends 'base.html' %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vetrina</title>
    <link rel="stylesheet" type="text/css" href="{% static '/css/vetrinaUtente.css' %}">
</head>

<body>
    {% block content %}
    <script>
        function onChange(event) {
            console.log(event.target.value)
        }
    </script>
    <h1>Visiona il nostro shop!</h1>


      <!-- Filtri della vetrina -->
    <div class="centerFiltri">
              <form class="filtri" method="GET">
                  <select name="tipologia">
                      <option value="" selected>Tutte le tipologie</option>
                      {% for item in elenco_tipologie %}
                          <option value="{{ item.tipologia }}" {% if item.tipologia == tipologia_filtrata %} selected {% endif %}>{{ item.tipologia }}</option>
                      {% endfor %}
                  </select>
                  <input type="number" name="disponibilita" placeholder="Filtro per disponibilità" value="{{ request.GET.disponibilita }}">
                  <input type="number" name="prezzo_min" placeholder="Prezzo minimo" value="{{ request.GET.prezzo_min }}">
                  <input type="number" name="prezzo_max" placeholder="Prezzo massimo" value="{{ request.GET.prezzo_max }}">
                  <button type="submit">Filtra</button>
                  <a href="?reset_filters=true">Azzeramento filtri</a>
              </form>
          </div>
          <div class="centerSearch">
        <form class="formSearch" method="GET">
                      <input type="text" name="search_query" placeholder="Cerca prodotti" value="{{ request.GET.search_query }}">
                      <button type="submit">Cerca</button>
                  </form>
              </div>
          </div>
      {% if elenco_prodotti.count == 0 %}{{ error_message }}{% endif %}
        <div class="centerTable cliente">
          <table>
              <thead>
                 <tr>
                  <td>Nome prodotto</td>
                  <td>Tipologia</td>
                  <td>Descrizione</td>
                  <td>Prezzo</td>
                  <td>Quantità</td>
                  <td>Azione</td>
                </tr>
              </thead>

              <tbody>
                {% for item in elenco_prodotti %}
                    <tr>
                      <td>{{ item.nome }}</td>
                      <td>{{ item.tipologia }}</td>
                      <td>{{ item.descrizione }}</td>
                      <td>{{ item.prezzo }}€</td>
                        <td>
                            <label for="quantita_acquisto" onchange="onChange()">
                                <input type="number" id="quantita_acquisto" min="1" max="10" value="1"/>
                            </label>
                        </td>
                      <td>
                          <a href="{% url 'aggiungi_al_carrello' item.codice_seriale item.disponibilita %}">Aggiungi al carrello</a>
                      </td>
                    </tr>
                {% endfor %}
              </tbody>
          </table>
        </div>
        <div>
            <button class="fakeButton" onclick="window.location.href='{% url 'carrello' %}'">Apri carrello</button>
        </div>
      {% endblock content %}
</body>
</html>
